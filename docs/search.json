{
  "articles": [
    {
      "path": "about.html",
      "title": "About this site",
      "description": "Some additional details about the website",
      "author": [],
      "contents": "\r\n\r\n\r\n\r\n",
      "last_modified": "2021-08-20T20:40:39-03:00"
    },
    {
      "path": "index.html",
      "title": "PNADcovid",
      "author": [
        {
          "name": "Rafael Peixoto",
          "url": {}
        }
      ],
      "date": "08-20-2021",
      "contents": "\r\n\r\nContents\r\nIntrodução\r\nObter os dados\r\nAnálise dos dados\r\n\r\n\r\nIntrodução\r\nPara maiores informações sobre o pacote COVIDIBGE, olhar o manual.\r\nObter os dados\r\nInstalar e carregar o pacote.\r\n\r\n\r\ninstall.packages(\"COVIDIBGE\")\r\n\r\n\r\n\r\n\r\n\r\nlibrary(COVIDIBGE)\r\n\r\n\r\n\r\nBaixar os dados (demora um pouco).\r\n\r\n\r\nget_covid(year = 2020, month = 5, savedir = getwd())\r\nget_covid(year = 2020, month = 6, savedir = getwd())\r\nget_covid(year = 2020, month = 7, savedir = getwd())\r\nget_covid(year = 2020, month = 8, savedir = getwd())\r\nget_covid(year = 2020, month = 9, savedir = getwd())\r\nget_covid(year = 2020, month = 10, savedir = getwd())\r\nget_covid(year = 2020, month = 11, savedir = getwd())\r\n\r\n\r\n\r\nLer os dados, modificar com o dicionário e salvar em um arquivo do formato do R (mais rápido de carregar).\r\n\r\n\r\nread_covid(microdata=\"PNAD_COVID_052020.csv\") %>%\r\n  covid_labeller(dictionary.file=\"Dicionario_PNAD_COVID_052020_20210726.xls\") %>%\r\n  saveRDS(file = \"PNADcovid05.rds\")\r\nread_covid(microdata=\"PNAD_COVID_062020.csv\") %>%\r\n  covid_labeller(dictionary.file=\"Dicionario_PNAD_COVID_062020_20210726.xls\") %>%\r\n  saveRDS(file = \"PNADcovid06.rds\")\r\nread_covid(microdata=\"PNAD_COVID_072020.csv\") %>%\r\n  covid_labeller(dictionary.file=\"Dicionario_PNAD_COVID_072020_20210726.xls\") %>%\r\n  saveRDS(file = \"PNADcovid07.rds\")\r\nread_covid(microdata=\"PNAD_COVID_082020.csv\") %>%\r\n  covid_labeller(dictionary.file=\"Dicionario_PNAD_COVID_082020_20210726.xls\") %>%\r\n  saveRDS(file = \"PNADcovid08.rds\")\r\nread_covid(microdata=\"PNAD_COVID_092020.csv\") %>%\r\n  covid_labeller(dictionary.file=\"Dicionario_PNAD_COVID_092020_20210726.xls\") %>%\r\n  saveRDS(file = \"PNADcovid09.rds\")\r\nread_covid(microdata=\"PNAD_COVID_102020.csv\") %>%\r\n  covid_labeller(dictionary.file=\"Dicionario_PNAD_COVID_102020_20210726.xls\") %>%\r\n  saveRDS(file = \"PNADcovid10.rds\")\r\nread_covid(microdata=\"PNAD_COVID_112020.csv\") %>%\r\n  covid_labeller(dictionary.file=\"Dicionario_PNAD_COVID_112020_20210726.xls\") %>%\r\n  saveRDS(file = \"PNADcovid11.rds\")\r\n\r\n\r\n\r\nCarregar os dados a partir do arquivo no formato do R.\r\n\r\n\r\nPNADdados05 <- readRDS(file = \"PNADcovid05.rds\")\r\nPNADdados06 <- readRDS(file = \"PNADcovid06.rds\")\r\nPNADdados07 <- readRDS(file = \"PNADcovid07.rds\")\r\nPNADdados08 <- readRDS(file = \"PNADcovid08.rds\")\r\nPNADdados09 <- readRDS(file = \"PNADcovid09.rds\")\r\nPNADdados10 <- readRDS(file = \"PNADcovid10.rds\")\r\nPNADdados11 <- readRDS(file = \"PNADcovid11.rds\")\r\n\r\n\r\n\r\nPodemos também juntar todos os dados em um único data.frame.\r\n\r\n\r\nPNADtotal <- PNADdados05 %>% \r\n  full_join(PNADdados06) %>%\r\n  full_join(PNADdados07) %>%\r\n  full_join(PNADdados08) %>%\r\n  full_join(PNADdados09) %>%\r\n  full_join(PNADdados10) %>%\r\n  full_join(PNADdados11)\r\n\r\n\r\n\r\nPara não ter que repetir isso toda vez, podemos salvar esse data.frame em um arquivo no formato do R.\r\n\r\n\r\nsaveRDS(PNADtotal, file = \"PNADtotal.rds\")\r\n\r\n\r\n\r\nCarregando esse arquivo:\r\n\r\n\r\nPNADtotal <- readRDS(file = \"PNADtotal.rds\")\r\n\r\n\r\n\r\nEntretanto, o autor do pacote recomenda partir desses dados amostrais e analisar as características da população, por meio do pacote survey. Para tanto, precisamos transformar o objeto em um objeto que pode ser lido por esse pacote, por meio da função covid_design.\r\n\r\n\r\nPNADdesign05 <- covid_design(PNADdados05)\r\n\r\n\r\n\r\nCarregando o pacote survey.\r\n\r\n\r\nlibrary(survey)\r\n\r\n\r\n\r\nAnálise dos dados\r\nGráficos com valores amostrais:\r\n\r\n\r\nPNADtotal %>%\r\n  select(`UF`, \"Sexo\" = `A003`) %>%\r\n  ggplot() +\r\n  aes(y = `UF`, fill = `Sexo`) +\r\n  geom_bar() +\r\n  theme_classic() +\r\n  labs(\r\n    title = \"Sexo\",\r\n    subtitle = \"Número total\",\r\n    caption = \"Fonte: Elaboração própria. Dados do IBGE\"\r\n  ) +\r\n  scale_x_continuous(labels = scales::unit_format(unit = \"K\", scale = 1e-3)) +\r\n  theme(panel.grid.major.x = element_line(colour = gray(0.85),  size = 0.1))\r\n\r\n\r\n\r\n\r\n\r\n\r\nPNADtotal %>%\r\n  select(`UF`, \"Sexo\" = `A003`) %>%\r\n  ggplot() +\r\n  aes(y = `UF`, fill = `Sexo`) +\r\n  geom_bar(position=\"fill\") +\r\n  geom_vline(xintercept = 0.5) +\r\n  theme_classic() +\r\n  labs(\r\n    title = \"Sexo\",\r\n    subtitle = \"proporção\",\r\n    caption = \"Fonte: Elaboração própria. Dados do IBGE\",\r\n    x = \"Proporção\"\r\n  ) +\r\n  scale_x_continuous(labels = scales::label_percent())\r\n\r\n\r\n\r\n\r\n\r\n\r\nPNADtotal %>%\r\n  select(`UF`, \"Cor\" = `A004`) %>%\r\n  ggplot() +\r\n  aes(y = `UF`, fill = `Cor`) +\r\n  geom_bar() +\r\n  theme_classic() +\r\n  labs(\r\n    title = \"Cor\",\r\n    subtitle = \"Número total\",\r\n    caption = \"Fonte: Elaboração própria. Dados do IBGE\"\r\n  ) +\r\n  scale_x_continuous(labels = scales::unit_format(unit = \"K\", scale = 1e-3)) +\r\n  theme(panel.grid.major.x = element_line(colour = gray(0.85),  size = 0.1))\r\n\r\n\r\n\r\n\r\n\r\n\r\nPNADtotal %>%\r\n  select(`UF`, \"Cor\" = `A004`) %>%\r\n  ggplot() +\r\n  aes(y = `UF`, fill = `Cor`) +\r\n  geom_bar(position=\"fill\") +\r\n  geom_vline(xintercept = 0.5) +\r\n  theme_classic() +\r\n  labs(\r\n    title = \"Cor\",\r\n    subtitle = \"proporção\",\r\n    caption = \"Fonte: Elaboração própria. Dados do IBGE\",\r\n    x = \"Proporção\"\r\n  ) +\r\n  scale_x_continuous(labels = scales::label_percent())\r\n\r\n\r\n\r\n\r\n\r\n\r\nPNADtotal %>%\r\n  select(\"Cor\" = `A004`, \"Horas trabalhadas\" = `C008`) %>%\r\n  ggplot() +\r\n  aes(y = `Horas trabalhadas`, fill = `Cor`) +\r\n  geom_boxplot(na.rm = T) +\r\n  theme_classic() +\r\n  labs(\r\n    title = \"Horas trabalhadas\",\r\n    subtitle = \"\",\r\n    caption = \"Fonte: Elaboração própria. Dados do IBGE\",\r\n    x = \"\"\r\n  )\r\n\r\n\r\n\r\n\r\nGráficos com valores para a população, calculado com o pacote survey:\r\n\r\n\r\nsvytotal(x = ~ interaction(`A003`, `UF`), design = PNADdesign05, na.rm = TRUE)\r\n\r\n\r\n                                                   total SE\r\ninteraction(A003, UF)Homem.Rondônia               901537  0\r\ninteraction(A003, UF)Mulher.Rondônia              881636  0\r\ninteraction(A003, UF)Homem.Acre                   438253  0\r\ninteraction(A003, UF)Mulher.Acre                  438043  0\r\ninteraction(A003, UF)Homem.Amazonas              2026027  0\r\ninteraction(A003, UF)Mulher.Amazonas             2009956  0\r\ninteraction(A003, UF)Homem.Roraima                284582  0\r\ninteraction(A003, UF)Mulher.Roraima               265840  0\r\ninteraction(A003, UF)Homem.Pará                  4330911  0\r\ninteraction(A003, UF)Mulher.Pará                 4307725  0\r\ninteraction(A003, UF)Homem.Amapá                  426249  0\r\ninteraction(A003, UF)Mulher.Amapá                 425036  0\r\ninteraction(A003, UF)Homem.Tocantins              792838  0\r\ninteraction(A003, UF)Mulher.Tocantins             782036  0\r\ninteraction(A003, UF)Homem.Maranhão              3477331  0\r\ninteraction(A003, UF)Mulher.Maranhão             3597680  0\r\ninteraction(A003, UF)Homem.Piauí                 1588358  0\r\ninteraction(A003, UF)Mulher.Piauí                1691226  0\r\ninteraction(A003, UF)Homem.Ceará                 4451462  0\r\ninteraction(A003, UF)Mulher.Ceará                4725159  0\r\ninteraction(A003, UF)Homem.Rio Grande do Norte   1721331  0\r\ninteraction(A003, UF)Mulher.Rio Grande do Norte  1809868  0\r\ninteraction(A003, UF)Homem.Paraíba               1936826  0\r\ninteraction(A003, UF)Mulher.Paraíba              2077143  0\r\ninteraction(A003, UF)Homem.Pernambuco            4584942  0\r\ninteraction(A003, UF)Mulher.Pernambuco           4966737  0\r\ninteraction(A003, UF)Homem.Alagoas               1602636  0\r\ninteraction(A003, UF)Mulher.Alagoas              1740438  0\r\ninteraction(A003, UF)Homem.Sergipe               1117945  0\r\ninteraction(A003, UF)Mulher.Sergipe              1198200  0\r\ninteraction(A003, UF)Homem.Bahia                 7241748  0\r\ninteraction(A003, UF)Mulher.Bahia                7661305  0\r\ninteraction(A003, UF)Homem.Minas Gerais         10469789  0\r\ninteraction(A003, UF)Mulher.Minas Gerais        10795693  0\r\ninteraction(A003, UF)Homem.Espírito Santo        1995725  0\r\ninteraction(A003, UF)Mulher.Espírito Santo       2058334  0\r\ninteraction(A003, UF)Homem.Rio de Janeiro        8297956  0\r\ninteraction(A003, UF)Mulher.Rio de Janeiro       9051478  0\r\ninteraction(A003, UF)Homem.São Paulo            22544041  0\r\ninteraction(A003, UF)Mulher.São Paulo           23688242  0\r\ninteraction(A003, UF)Homem.Paraná                5629092  0\r\ninteraction(A003, UF)Mulher.Paraná               5862277  0\r\ninteraction(A003, UF)Homem.Santa Catarina        3586044  0\r\ninteraction(A003, UF)Mulher.Santa Catarina       3642071  0\r\ninteraction(A003, UF)Homem.Rio Grande do Sul     5546056  0\r\ninteraction(A003, UF)Mulher.Rio Grande do Sul    5851269  0\r\ninteraction(A003, UF)Homem.Mato Grosso do Sul    1356903  0\r\ninteraction(A003, UF)Mulher.Mato Grosso do Sul   1377956  0\r\ninteraction(A003, UF)Homem.Mato Grosso           1756416  0\r\ninteraction(A003, UF)Mulher.Mato Grosso          1709182  0\r\ninteraction(A003, UF)Homem.Goiás                 3521304  0\r\ninteraction(A003, UF)Mulher.Goiás                3581349  0\r\ninteraction(A003, UF)Homem.Distrito Federal      1464172  0\r\ninteraction(A003, UF)Mulher.Distrito Federal     1583048  0\r\n\r\n\r\n\r\nsvyhist(formula = ~ `C008`, design = PNADdesign05, na.rm = TRUE)\r\n\r\n\r\n\r\n\r\nAlternativamente, podemos utilizar a função ggsurvey para plotar os objetos do tipo survey\r\n\r\n\r\nggsurvey <- function(design = NULL, mapping = NULL, ...) {\r\n  if (!inherits(design, \"survey.design\")) {\r\n    stop(\"'design' should be a 'survey.design' object.\")\r\n  }\r\n  if (!requireNamespace(\"survey\", quietly = TRUE)) {\r\n    stop(\"survey package is required.\")\r\n  }\r\n  if (!requireNamespace(\"ggplot2\", quietly = TRUE)) {\r\n    stop(\"ggplot2 package is required.\")\r\n  }\r\n  data <- design$variables\r\n  data$.weights <- weights(design)\r\n  \r\n  if(is.null(mapping)) {\r\n    mapping <- ggplot2::aes()\r\n  }\r\n  \r\n  mapping$weight <- ggplot2::aes_string(weight = \".weights\")$weight\r\n  \r\n  ggplot2::ggplot(data, mapping, ...)\r\n}\r\n\r\n\r\n\r\n\r\n\r\nggsurvey(design = PNADdesign05) +\r\n  aes(y = `UF`, fill = `A003`) +\r\n  geom_bar() +\r\n  theme_classic() +\r\n  labs(\r\n    title = \"Sexo\",\r\n    subtitle = \"Número total\",\r\n    caption = \"Fonte: Elaboração própria. Dados do IBGE\"\r\n  ) +\r\n  scale_x_continuous(labels = scales::unit_format(unit = \"M\", scale = 1e-6)) +\r\n  theme(panel.grid.major.x = element_line(colour = gray(0.85),  size = 0.1))\r\n\r\n\r\n\r\n\r\n\r\n\r\nggsurvey(design = PNADdesign05) +\r\n  aes(y = `UF`, fill = `A004`) +\r\n  geom_bar(position = \"fill\") +\r\n  theme_classic() +\r\n  labs(\r\n    title = \"Cor\",\r\n    subtitle = \"Proporção\",\r\n    caption = \"Fonte: Elaboração própria. Dados do IBGE\",\r\n    x = \"\"\r\n  ) +\r\n scale_x_continuous(labels = scales::label_percent())\r\n\r\n\r\n\r\n\r\n\r\n\r\nggsurvey(design = PNADdesign05) +\r\n  aes(x = `C008`, fill = `A004`) +\r\n  geom_histogram() +\r\n  theme_classic() +\r\n  labs(\r\n    title = \"Cor\",\r\n    subtitle = \"Proporção\",\r\n    caption = \"Fonte: Elaboração própria. Dados do IBGE\",\r\n    x = \"Horas trabalhadas\"\r\n  ) +\r\n  scale_y_continuous(labels = scales::unit_format(unit = \"M\", scale = 1e-6))\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
      "last_modified": "2021-08-23T18:05:06-03:00"
    }
  ],
  "collections": []
}
